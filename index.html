<!DOCTYPE html>
<html>
    <head>
        <style>
            /* Set the size of the div element that contains the map */
            #map {
                height: 100%;  /* The height is 400 pixels */
                width: 100%;  /* The width is the width of the web page */
            }

            body, html {
                margin: 0px;
                height: 100%;
                width: 100%;
            }
        </style>
    </head>
    <body>
        <!--The div element for the map -->
        <div id="map"></div>
    </body>
    <script>
        const loadJSON = (callback) => {
            let xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            xobj.open('GET', 'static/js/data.json', true);
            // Replace 'my_data' with the path to your file
            xobj.onreadystatechange = () => {
                if (xobj.readyState === 4 && xobj.status === 200) {
                    // Required use of an anonymous callback
                    // as .open() will NOT return a value but simply returns undefined in asynchronous mode
                    callback(xobj.responseText);
                }
            };
            xobj.send(null);
        }

        // Initialize and add the map
        function initMap() {

            // The location of Cebu
            const cebu = {lat: 10.488, lng: 123.880};
            // The map, centered at Cebu
            const map = new google.maps.Map(
            document.getElementById('map'), {zoom: 10, center: cebu});
            //   var marker = new google.maps.Marker({position: cebu, map: map});

            loadJSON((response) => {
            // Parse JSON string into object
                const geoData = JSON.parse(response);
                console.log(geoData.length);
                for (let ctr = 0; ctr < geoData.length; ctr++){
                    let coords = geoData.geometry.coordinates;
                    let latLng = {lat: geoData.geometry.coordinates[0], lng: geoData.geometry.coordinates[0]};
                    console.log(geoData.length);
                    let marker = new google.maps.Marker({
                    position: latLng,
                    map: map
                    });
                }


            });
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCdAb96ekVOdqHZv8O3rMIwxKf_WdRA65M&callback=initMap"></script>
</html>